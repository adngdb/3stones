<!doctype html>
<html lang="en">
    <head>
        <title>· · ·</title>
        <meta charset="utf-8">

        <style>

html {
    height: 100%;
    width: 100%;
}
body {
    background-color: black;
    height: 100%;
    margin: 0;
    padding: 0;
    width: 100%;
}

#game-content {
    height: 100%;
    width: 100%;
}

#stones-count {
    align-items: center;
    color: white;
    display: flex;
    height: 100%;
    justify-content: center;
    margin: 0;
    padding: 0;
    position: absolute;
    text-align: center;
    width: 100%;
}
    #stones-count span {
        align-items: center;
        display: flex;
        font-size: 30rem;
        justify-content: center;
    }

.stone {
    background-color: black;
    height: 33%;
    opacity: .5;
    width: 100%;
}

.stone + .stone {
    border-top: 2px solid gray;
}

.stone.selected {
    background-color: white;
}

        </style>
    </head>

    <body>
        <p id="stones-count"><span>0</span></p>
        <div id="game-content">
            <div class="stone"></div>
            <div class="stone"></div>
            <div class="stone"></div>
        </div>

        <script>

var stonesElt = document.getElementsByClassName('stone');
var count = 0;
var stonesCountElt = document.getElementById('stones-count').getElementsByTagName('span')[0];

Array.forEach(stonesElt, function (s, i) {
    var onStoneClick = function (e) {
        e.preventDefault();
        this.classList.toggle('selected');

        this.selected = !this.selected;
        if (this.selected) {
            count++;
        }
        else {
            count--;
        }

        console.log(stonesCountElt);
        stonesCountElt.innerHTML = count.toString();
    }
    s.addEventListener('click', onStoneClick);
    s.addEventListener('touchstart', onStoneClick);
});

var locked = false;

function handleOrientationEvent(ev) {
  if (!locked && isFaceDown(ev.beta)) {
    locked = true;
  }
  if (locked && !isFaceDown(ev.beta)) {
    locked = false;
  }
}

function isFaceDown(beta) {
  return Math.abs(beta) > 170;
}

window.addEventListener("deviceorientation", handleOrientationEvent, true);

        </script>
    </body>
</html>
